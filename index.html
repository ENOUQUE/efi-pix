<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gerador de PIX – Efi Bank</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 1rem;
      font-family: 'Inter', sans-serif;
      background: #fef6ef;
      min-height: 100vh;
      color: #333;
    }
    .container {
      background: #ffffff;
      padding: 1.5rem;
      border-radius: 1rem;
      max-width: 420px;
      margin: auto;
      box-shadow: 0 10px 30px rgba(0,0,0,0.05);
    }
    .logo {
      display: flex;
      justify-content: center;
      margin-bottom: 1.5rem;
    }
    .logo img {
      height: 55px;
    }
    h1 {
      text-align: center;
      color: #ff7a00;
      font-size: 1.8rem;
      margin-bottom: 0.5rem;
    }
    p {
      text-align: center;
      margin-bottom: 1.5rem;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    button {
      cursor: pointer;
      border: none;
      border-radius: 0.5rem;
      padding: 0.75rem;
      font-weight: 600;
      font-size: 1rem;
      transition: 0.3s;
    }
    .value-button {
      background-color: #ff7a00;
      color: #fff;
    }
    .value-button:hover {
      background-color: #e96c00;
    }
    .main-button {
      width: 100%;
      margin-top: 1rem;
      background: #4d0065;
      color: #fff;
    }
    .main-button:hover {
      background-color: #3c004e;
    }
    input, textarea {
      width: 100%;
      padding: 0.75rem;
      margin-top: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 0.5rem;
      resize: none;
      font-size: 1rem;
    }
    label {
      margin-top: 1rem;
      display: block;
      font-weight: 600;
    }
    .box {
      background-color: #fafafa;
      padding: 1rem;
      border-radius: 0.5rem;
      margin-top: 1.5rem;
      border: 1px solid #eee;
    }
    .box h3 {
      margin-top: 0;
      color: #4d0065;
    }
    footer {
      text-align: center;
      color: #999;
      font-size: 0.85rem;
      margin-top: 2rem;
    }
  </style>
</head>
<body>

  <div class="container">
    <div class="logo">
      <img src="https://s3gt.previas.shop/efipix/Design%20sem%20nome%20(2).jpg">
    </div>
    <h1>Gerador de PIX</h1>
    <p>Escolha o valor do pagamento.</p>

    <div class="grid">
      <button class="value-button" id="btn10">R$ 10</button>
      <button class="value-button" id="btn15">R$ 15</button>
      <button class="value-button" id="btn30">R$ 30</button>
    </div>

    <label>Outro valor (R$):</label>
    <input type="text" id="valor" placeholder="0,00">

    <button class="main-button" id="gerarPixBtn">Gerar PIX</button>

    <div id="qrContainer" class="box" style="display:none;">
      <h3>QR Code PIX</h3>
      <img id="qrImage" src="" alt="QR Code PIX" style="width:100%;">
    </div>

    <div id="copyContainer" class="box" style="display:none;">
      <h3>PIX Copia e Cola</h3>
      <textarea id="pixCopiaCola" rows="4" readonly></textarea>
      <button class="value-button" id="copyBtn">Copiar</button>
    </div>
  </div>

  <footer>
    &copy; <span id="ano"></span> Gerador PIX – Efi Bank.
  </footer>

<script>
document.getElementById('ano').textContent = new Date().getFullYear();

const valorInput = document.getElementById('valor');
document.getElementById('btn10').addEventListener('click', () => setValue(10));
document.getElementById('btn15').addEventListener('click', () => setValue(15));
document.getElementById('btn30').addEventListener('click', () => setValue(30));
document.getElementById('gerarPixBtn').addEventListener('click', gerarPix);
document.getElementById('copyBtn').addEventListener('click', copyPix);
valorInput.addEventListener('input', () => formatCurrency(valorInput));

function formatCurrency(input) {
  let value = input.value.replace(/\D/g, '');
  if (value === '') {
    input.value = '';
    return;
  }
  value = (parseInt(value) / 100).toFixed(2);
  input.value = value.replace('.', ',');
}

function setValue(valor) {
  valorInput.value = valor.toFixed(2).replace('.', ',');
}

function gerarPix() {
  const valorStr = valorInput.value.replace('.', '').replace(',', '.');
  const valorNum = parseFloat(valorStr);

  if (isNaN(valorNum) || valorNum <= 0) {
    alert("Insira um valor válido.");
    return;
  }

  fetch('https://webhook.previas.shop/webhook/webhook-gerar-pix', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ valor: valorNum })
  })
  .then(res => res.json())
  .then(data => {
    const pix = data.pixCopiaEColaString || data.pixCopiaECola;
    if (!pix) {
      alert('Erro ao gerar PIX.');
      return;
    }

    document.getElementById('pixCopiaCola').value = pix;
    document.getElementById('copyContainer').style.display = 'block';

    const qrLink = `https://api.qrserver.com/v1/create-qr-code/?data=${encodeURIComponent(pix)}&size=250x250`;
    document.getElementById('qrImage').src = qrLink;
    document.getElementById('qrContainer').style.display = 'block';
  })
  .catch(err => {
    alert('Erro na requisição. ' + err.message);
    console.error(err);
  });
}

function copyPix() {
  const textarea = document.getElementById('pixCopiaCola');

  try {
    if (navigator.clipboard && window.isSecureContext) {
      navigator.clipboard.writeText(textarea.value)
        .then(() => alert('Copiado para a área de transferência!'))
        .catch(() => fallbackCopy(textarea));
    } else {
      fallbackCopy(textarea);
    }
  } catch {
    fallbackCopy(textarea);
  }
}

function fallbackCopy(el) {
  el.select();
  el.setSelectionRange(0, 99999);
  try {
    const successful = document.execCommand('copy');
    if (successful) {
      alert('Copiado para a área de transferência!');
    } else {
      alert('Erro ao copiar.');
    }
  } catch (err) {
    alert('Erro ao copiar.');
  }
}
</script>

</body>
</html>






